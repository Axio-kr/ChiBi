<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live2D 모델</title>
    <!-- 중복된 스크립트 제거 및 필요한 스크립트만 포함 -->
    <script src="https://axio-kr.github.io/ChiBi/JS/pixi.min.js"></script>
    <script src="https://axio-kr.github.io/ChiBi/JS/live2dcubismcore.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display@latest/dist/pixi-live2d-display.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
        }
        #canvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        const cubism4Model = "https://axio-kr.github.io/ChiBi/CHIBI/CHIBI.model3.json"; // 업로드된 모델 경로
        
        async function loadModel() {
            try {
                console.log("모델 로드 시작");

                const app = new PIXI.Application({
                    view: document.getElementById("canvas"),
                    autoStart: true,
                    resizeTo: window,
                });

                // 배경 이미지 로드 및 스프라이트 생성 코드는 생략되었습니다.

                // 모델 로드
                console.log("모델 로드 시도 중:", cubism4Model);
                const model = await PIXI.live2d.Live2DModel.from(cubism4Model); // 수정된 부분
                console.log("모델 로드 성공");
                app.stage.addChild(model);

                // 모델 초기 스케일 설정 및 위치 조정 코드는 생략되었습니다.

                // 클릭 이벤트 설정
                model.on("hit", (hitAreas) => {
                    if (hitAreas.includes("Body")) {
                        model.motion("TapBody");
                    }
                    if (hitAreas.includes("Face")) {
                        model.motion("TapFace");
                    }
                });

            } catch (error) {
                console.error("모델 로드 실패:", error);
            }
        }

        // 모델 로드 함수 호출
        loadModel();
    </script>
</body>
</html>
